@import "tailwindcss";

/* 1. Tailwind 설정 */
@theme {
  --color-background: var(--color-background);
  --color-primary: var(--color-primary);
  --color-secondary: var(--color-secondary);
  --color-primary-dark: var(--color-primary-dark);
  --color-component-bg: var(--color-component-bg);
  --color-primary-darker: var(--color-primary-darker);
  --color-border-dark: var(--color-border-dark);
  --color-accent-mint: var(--color-accent-mint);
  --color-accent-yellow: var(--color-accent-yellow);
  --color-accent-blue: var(--color-accent-blue);
  --color-border: var(--color-border);
  --color-subtle-bg: var(--color-subtle-bg);
  --color-inset-border: var(--color-inset-border);
  --color-divider: var(--color-divider);
  --text-main: var(--text-main);
  --text-subtle: var(--text-subtle);
  --text-on-primary: var(--text-on-primary);
  --color-warning: var(--color-warning);
  --color-warning-bg: var(--color-warning-bg);
  --agit-notice-badge-bg: var(--agit-notice-badge-bg);
  
  /* 감정 색상 연결 */
  --emotion-happy: var(--emotion-happy);
  --emotion-joy: var(--emotion-joy);
  --emotion-calm: var(--emotion-calm);
  --emotion-hope: var(--emotion-hope);
  --emotion-satisfied: var(--emotion-satisfied);
  --emotion-serene: var(--emotion-serene);
  --emotion-excitement: var(--emotion-excitement);
  --emotion-love: var(--emotion-love);
  --emotion-lazy: var(--emotion-lazy);
  --emotion-sad: var(--emotion-sad);
  --emotion-angry: var(--emotion-angry);
  --emotion-grateful: var(--emotion-grateful);
  --emotion-proud: var(--emotion-proud);
  --emotion-lonely: var(--emotion-lonely);
  --emotion-tired: var(--emotion-tired);
  --emotion-miss: var(--emotion-miss);
  --emotion-anxious: var(--emotion-anxious);
  --emotion-neutral: var(--emotion-neutral);

  /* 기타 설정 */
  --rounded-button: 8px;
}

/* 2. 실제 CSS 변수 정의 (:root) */
:root {
  /* --- 핵심 색상 --- */
  --color-background: #F9F5F0;     
  --color-primary: #FFBFAB;        
  --color-secondary: #FAF0E6;
  --color-primary-dark: #EAA994;
  --color-component-bg: #FFFAF0;

  --color-primary-darker: #D48F7A;
  --color-border-dark: #D5CABD;

  /* --- 보조 색상 --- */
  --color-accent-mint: #BEE8D0;
  --color-accent-yellow: #FFF4BD;
  --color-accent-blue: #AEC6CF;
  --color-border: #EAE3DA;
  --color-subtle-bg: #F5F5F1;
  --color-inset-border: rgba(0, 0, 0, 0.04);
  --color-divider: rgba(0, 0, 0, 0.08);

  /* --- 텍스트 색상 --- */
  --text-main: #333333;
  --text-subtle: #555555;
  --text-on-primary: #FFFFFF;

  /* --- 기능 색상 --- */
  --color-warning: #E57373;
  --color-warning-bg: #FAD2D2;
  --agit-notice-badge-bg: #FFF5F2;

/* 감정 테두리용 진한 색상 (Tone-on-Tone) */
  --emotion-happy: #FFD6D6; --emotion-happy-border: #FF8585;
  --emotion-joy: #FFEFBA; --emotion-joy-border: #FDD835;
  --emotion-calm: #D4F0F0; --emotion-calm-border: #4DD0E1;
  --emotion-hope: #E2F0CB; --emotion-hope-border: #AED581;
  --emotion-satisfied: #B5EAD7; --emotion-satisfied-border: #4DB6AC;
  --emotion-serene: #C7CEEA; --emotion-serene-border: #7986CB;
  --emotion-excitement: #D8B5E0; --emotion-excitement-border: #BA68C8;
  --emotion-love: #F8C8DC; --emotion-love-border: #F06292;
  --emotion-lazy: #E0E0E0; --emotion-lazy-border: #BDBDBD;
  --emotion-sad: #B4D4E1; --emotion-sad-border: #64B5F6;
  --emotion-angry: #E57373; --emotion-angry-border: #D32F2F;
  --emotion-grateful: #FFE5B4; --emotion-grateful-border: #FFB74D;
  --emotion-proud: #A8D8B0; --emotion-proud-border: #81C784;
  --emotion-lonely: #C9C9E0; --emotion-lonely-border: #7986CB;
  --emotion-tired: #C0C0C0; --emotion-tired-border: #90A4AE;
  --emotion-miss: #E6E6FA; --emotion-miss-border: #9575CD;
  --emotion-anxious: #BCC5D5; --emotion-anxious-border: #90A4AE;
  --emotion-neutral: #E0E0E0; --emotion-neutral-border: #B0BEC5;

  /* --- 프로필 색상 --- */
  --profile-emotion-red: rgba(229, 115, 115, 0.3);
  --profile-emotion-blue: rgba(176, 196, 222, 0.3);
  --profile-emotion-green: rgba(212, 240, 240, 0.3);
  --profile-emotion-yellow: rgba(255, 239, 186, 0.3);
  --profile-emotion-purple: rgba(199, 206, 234, 0.3);

  /* [NEW] 유일하게 추가: 줄 노트 패턴 (에디터 전용) */
  --pattern-ruled-line: linear-gradient(transparent 95%, #EAE3DA 96%);
}

/* --- 전역 스타일 --- */
body {
  background-color: var(--color-background);
  font-family: 'Pretendard', sans-serif;
  color: var(--text-main);
  line-height: 1.6;
}

.font-maru-buri {
  font-family: 'Maru Buri', serif;
}

.font-gowun-dodum {
  font-family: 'Gowun Dodum', sans-serif;
}

/*잘 사용안하는 폰트*/
.font-pacifico {
  font-family: 'Pacifico', cursive;
}

.text-shadow-sm {
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

/* 카드 기본 스타일 */
.card-base {
  @apply relative mb-4 overflow-hidden rounded-lg border;
  background-color: rgba(255, 250, 240, 0.6);
  border-color: var(--color-border);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03), 
              inset 0 0 0 1px var(--color-inset-border);
  transition: all 0.2s ease-in-out;
}
.card-base:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06),
              inset 0 0 0 1px var(--color-inset-border);
}

/* 노이즈 배경 */
.noise-background {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  z-index: -1;
  pointer-events: none;
  background-color: var(--color-background);
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4MDAgODAwIj48ZmlsdGVyIGlkPSJub2lzZUZpbHRlciI+PGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuNjUiIG51bU9jdGF2ZXM9IjMiIHN0aXRjaFRpbGVzPSJzdGl0Y2giLz48L2ZpbHRlcj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWx0ZXI9InVybCgjbm9pc2VGaWx0ZXIpIi8+PC9zdmc+');
  opacity: 0.3;
}

/* --- 유틸리티 클래스 --- */

/* [수정: 옵션 2] 더 몽글몽글한 손그림 느낌 */
.rounded-hand-drawn {
  border-radius: 24px 28px 22px 26px / 26px 22px 28px 24px;
}

.clip-radius-fix {
  -webkit-mask-image: -webkit-radial-gradient(white, black);
  overflow: hidden;
  isolation: isolate;
  transform: translateZ(0);
}

.rubbed-pastel-layer {
  position: absolute;
  inset: 0;
  z-index: 0; 
  pointer-events: none;

  /* SVG 변경 사항: <svg ... preserveAspectRatio='none'> 추가 */
  --mask-url: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' preserveAspectRatio='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='cloud'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.02' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23cloud)' opacity='1'/%3E%3C/svg%3E");
  
  -webkit-mask-image: var(--mask-url);
  mask-image: var(--mask-url);
  
  /* 꽉 채우기 설정 */
  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  
  /* 투명도: 적절한 질감 강도 */
  opacity: 0.7; 
}

/* [NEW] 줄 노트 유틸리티 (Textarea 전용) */
.ruled-paper-input {
  background-image: var(--pattern-ruled-line);
  background-size: 100% 2.4rem; /* 줄 간격 */
  line-height: 2.4rem; /* 텍스트 줄 간격 일치 */
  background-attachment: local; /* 스크롤 시 배경도 이동 */
}

/* 캘린더 감정 점 스타일 */
.calendar-day { aspect-ratio: 1/1; position: relative; }
.calendar-day.has-diary::after { content: ''; position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); width: 5px; height: 5px; border-radius: 50%;}
.calendar-day.has-diary-happy::after { background-color: var(--emotion-happy); }
.calendar-day.has-diary-sad::after { background-color: var(--emotion-sad); }
.calendar-day.has-diary-angry::after { background-color: var(--emotion-angry); }
.calendar-day.has-diary-calm::after { background-color: var(--emotion-calm); }
.calendar-day.has-diary-anxious::after { background-color: var(--emotion-anxious); }
.calendar-day.has-diary-neutral::after { background-color: var(--emotion-neutral); }

/* 애니메이션 */
@keyframes slideInFromBottom { from { transform: translateY(100%); } to { transform: translateY(0); } }
.animate-slideInFromBottom { animation: slideInFromBottom 0.3s ease-out forwards; }

@keyframes modalShowFront { from {opacity: 0; transform: scale(0.8)} to { opacity: 1; transform: scale(1);}}
.animate-modalShowFront {animation: modalShowFront 0.3s ease-out forwards; }

@keyframes modalShowUp { from {opacity: 0; transform: translateY(20px)} to { opacity: 1; transform: translateY(0);}}
.animate-modalShowUp {animation: modalShowUp 0.3s ease-out forwards; }

@keyframes subtleBreathe {
  0%, 100% { width: 4px; }
  50% { width: 8px; }
}
.emotion-border-element { width: 4px; }
.animate-breathe { animation: subtleBreathe 1.5s ease-in-out; }

/* 유틸리티 확장 */
@layer utilities {
  .scrollbar-hide::-webkit-scrollbar { display: none; }
  .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
  
  .text-stroke-1 {
    -webkit-text-stroke: 1px rgba(0, 0, 0, 0.3);
    text-stroke: 1px rgba(0, 0, 0, 0.3);
  }
}
